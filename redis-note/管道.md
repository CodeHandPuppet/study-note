### Redis管道

#### 实现步骤(环境linux下) ：
1. 在外编辑一个instruct.txt 
    ``` shell
    touch instruct.txt
    vim instruct
    ```
    insturct.txt
    ``` txt
    set k1 v1
    set k2 v2
    set number1 1
    incr number1
    ```

2. 编辑完成后,执行命令
    ``` shell
    cat instruct.txt | redis-cli -a 123456 --pipe |
    redis-cli -a 123456
    get number1
    get k1

    ```
#### 总结
- Pipeline 与原生批量
    - 原生批量命令是原子性（如：mset，mget），pipeline是非原子性
    - 原生批量命令一次只能执行一种命令，pipeline支持批量执行不同命令
    - 原生批命令是服务端实现，而pipeline需要服务端与客户端共同完成
- Pipeline 与事务对比
    - 事务具有原子性，管道不具有原子性
    - 管道一次性将多条命令发送到服务器，事务是一条一条发的，事务只有在接收到exec命令后才会执行，管道不会执行事务时会阻塞其他命令的执行，而执行管道中的命令时不会
- Pipeline 注意事项
    - pipeline缓冲的指令只是会依次执行，不保证原子性，如果执行中指令发生异常，将会继续执行后续的指令
    - 使用pipeline组装的命令个数不能太多，不然数据量过大客户端阻塞的时间可能过久，同时服务器也被迫回复一个队列答复，占用很多内存



